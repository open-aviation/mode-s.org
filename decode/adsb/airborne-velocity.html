<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

  <meta name="author" content="Junzi Sun">


  <title>The 1090MHz Riddle</title>
  <style type="text/css">code{white-space: pre;}</style>



  <link rel="stylesheet" href="../bootstrap.min.css">
  <link rel="stylesheet" href="../style.css">

  <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_CHTML-full" type="text/javascript"></script>

<link href="https://fonts.googleapis.com/css?family=PT+Serif" rel="stylesheet">
<script defer src="https://use.fontawesome.com/releases/v5.0.10/js/all.js"
  integrity="sha384-slN8GvtUJGnv6ca26v8EzVaR9DC58QEwsIk9q1QXdCU8Yu8ck/tL/5szYlBbqmS+" crossorigin="anonymous">
</script>

</head>
<body>

<div class="container">

<div class="d-flex flex-row align-items-end">
	<div>
		<h1 class="title">The 1090MHz Riddle</h1>
		<div class="subtitle">An open-access book about decoding Mode-S and ADS-B data</div>
	</div>
	<div class='ml-auto chapter-nav'>
    <div class="author">By: <strong>Junzi Sun</strong> (<a href="http://junzis.com">junzis.com</a>)</div>

    <a href="http://mode-s.org" type="button"
        class="btn btn-sm btn-outline-dark btn-light">
      <i class="fas fa-angle-double-left"></i> mode-s.org
    </a>

    <a href="../book-the_1090mhz_riddle-junzi_sun.pdf"
        type="button" class="btn btn-sm btn-outline-info">
      <i class="far fa-file-pdf"></i> Download PDF
    </a>
	</div>
</div>

<hr>

<div class="row">
<div class="col-md-4 col-lg-3">
<nav>
  <h1>Chapters</h1>
  <ul>
    <li><a href="../index.html">Introduction</a></li>
    <li><a href="../adsb.html">ADS-B</a></li>
    <ul>
      <li><a href="../adsb/introduction.html">Basics</a></li>
      <li><a href="../adsb/identification.html">Aircraft Identification</a></li>
      <li><a href="../adsb/compact-position-report.html">Compact Position Reporting</a></li>
      <li><a href="../adsb/airborne-position.html">Airborne Position</a></li>
      <li><a href="../adsb/airborne-velocity.html">Airborne Velocity</a></li>
    </ul>
    <li><a href="../adsb/advance.html">Advanced ADS-B</a></li>
    <ul>
      <li><a href="../adsb/version.html">ADS-B Versions</a></li>
      <li><a href="../adsb/operation-status.html">Operation Status</a></li>
      <li><a href="../adsb/uncertainty.html">Uncertainty and Accuracy</a></li>
    </ul>
    <li><a href="../ehs.html">Enhanced Mode-S</a></li>
    <ul>
      <li><a href="../ehs/introduction.html">Basics</a></li>
      <li><a href="../ehs/bds20-identification.html">Aircraft Identification</a></li>
      <li><a href="../ehs/bds40-intention.html">Aircraft Intention</a></li>
      <li><a href="../ehs/bds50-track-n-turn.html">Track and Turn</a></li>
      <li><a href="../ehs/bds60-airspeed.html">Airspeed and Heading</a></li>
    </ul>
  </ul>
</nav>

<hr>
<nav id="TOC">
<div class="float-right">
  <a href="https://github.com/junzis/the-1090mhz-riddle/edit/master/adsb/airborne-velocity.tex"
    class='btn btn-sm btn-outline-danger'> <i class="fab fa-github-alt"></i> Edit</a>
</div>
<h1>In this page</h1>
<ul>
<li><a href="#airborne-velocity">Airborne Velocity</a><ul>
<li><a href="#subtype-1-ground-speed">Subtype 1 (Ground Speed)</a><ul>
<li><a href="#horizontal-velocity">Horizontal Velocity</a></li>
<li><a href="#vertical-rate">Vertical Rate</a></li>
</ul></li>
<li><a href="#subtype-3-airspeed">Subtype 3 (Airspeed)</a><ul>
<li><a href="#heading">Heading</a></li>
<li><a href="#velocity-airspeed">Velocity (Airspeed)</a></li>
<li><a href="#vertical-rate-1">Vertical Rate</a></li>
</ul></li>
</ul></li>
</ul>
</nav>

</div>


<div class="col-md-8 col-lg-9 maintext">

<div class="float-right">
  <a href="https://github.com/junzis/the-1090mhz-riddle/edit/master/adsb/airborne-velocity.tex"
    class='btn btn-sm btn-outline-danger'> <i class="fas fa-edit"></i> Recommend edits</a>
</div>

<h1 id="airborne-velocity">Airborne Velocity</h1>
<p>There are two different types of messages for velocities, determined by 3-bit subtype in the message. With subtype 1 and 2, surface velocity (ground speed) is reported. And in subtype 3 and 4, aircraft airspeed is reported.</p>
<p>Type 2 and 4 are for supersonic aircraft. So, before we have another commercial supersonic aircraft flying around, you won’t see any of those types.</p>
<p>In real world, very few of subtype 3 messages are reported. In our setup, we only received <strong>0.3%</strong> of these message with regards to subtype 1.</p>
<p>An aircraft velocity message has <code>DF: 17 or 18</code>, <code>TC: 19</code>, and the subtype codes are represented in bits 38 to 40. Now, we can decode those messages.</p>
<h2 id="subtype-1-ground-speed">Subtype 1 (Ground Speed)</h2>
<p>Subtype 1 (subsonic, ground speed), are broadcast when ground velocity information is available. The aircraft velocity contains speed and heading information. The speed and heading are also decomposed into North-South, and East-West components.</p>
<p>For example, the following message is received:</p>
<pre><code>Message: 8D485020994409940838175B284F

|    | ICAO24 |      DATA      |  CRC   |
|----|--------|----------------|--------|
| 8D | 485020 | 99440994083817 | 5B284F |

Convert DATA [99440994083817] into binary:

|-------|-----|----|--------|-----|------|------------|
|  TC   | ST  | IC | RESV_A | NAC | S-EW | V-EW       |
|-------|-----|----|--------|-----|------|------------|
| 10011 | 001 | 0  | 1      | 000 | 1    | 0000001001 |

|------|------------|-------|------|-----------|--------|-------|---------|
| S-NS | V-NS       | VrSrc | S-Vr | Vr        | RESV_B | S_Dif | Dif     |
|------|------------|-------|------|-----------|--------|-------|---------|
| 1    | 0010100000 | 0     | 1    | 000001110 | 00     | 0     | 0010111 |</code></pre>
<p>There are quite a few parameters in the velocity message. From left to right, the number of bits indicates the contents in following Table [tb:adsb-v-bits-st-1]</p>
<table>
<caption>Airborne velocity message bits explained - Subtype 1<span data-label="tb:adsb-v-bits-st-1"></span></caption>
<thead>
<tr class="header">
<th align="left">MSG Bits</th>
<th align="left">Data Bits</th>
<th align="left">Len</th>
<th align="left">Abbr</th>
<th align="left">Content</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">33 - 37</td>
<td align="left">1 - 5</td>
<td align="left">5</td>
<td align="left">TC</td>
<td align="left">Type code</td>
</tr>
<tr class="even">
<td align="left">38 - 40</td>
<td align="left">6 - 8</td>
<td align="left">3</td>
<td align="left">ST</td>
<td align="left">Subtype</td>
</tr>
<tr class="odd">
<td align="left">41</td>
<td align="left">9</td>
<td align="left">1</td>
<td align="left">IC</td>
<td align="left">Intent change flag</td>
</tr>
<tr class="even">
<td align="left">42</td>
<td align="left">10</td>
<td align="left">1</td>
<td align="left">RESV_A</td>
<td align="left">Reserved-A</td>
</tr>
<tr class="odd">
<td align="left">43 - 45</td>
<td align="left">11 - 13</td>
<td align="left">3</td>
<td align="left">NAC</td>
<td align="left">Velocity uncertainty (NAC)</td>
</tr>
<tr class="even">
<td align="left">46</td>
<td align="left">14</td>
<td align="left">1</td>
<td align="left">S_ew</td>
<td align="left">East-West velocity sign</td>
</tr>
<tr class="odd">
<td align="left">47 - 56</td>
<td align="left">15 - 24</td>
<td align="left">10</td>
<td align="left">V_ew</td>
<td align="left">East-West velocity</td>
</tr>
<tr class="even">
<td align="left">57</td>
<td align="left">25</td>
<td align="left">1</td>
<td align="left">S_ns</td>
<td align="left">North-South velocity sign</td>
</tr>
<tr class="odd">
<td align="left">58 - 67</td>
<td align="left">26 - 35</td>
<td align="left">10</td>
<td align="left">V_ns</td>
<td align="left">North-South velocity</td>
</tr>
<tr class="even">
<td align="left">68</td>
<td align="left">36</td>
<td align="left">1</td>
<td align="left">VrSrc</td>
<td align="left">Vertical rate source</td>
</tr>
<tr class="odd">
<td align="left">69</td>
<td align="left">37</td>
<td align="left">1</td>
<td align="left">S_vr</td>
<td align="left">Vertical rate sign</td>
</tr>
<tr class="even">
<td align="left">70 - 78</td>
<td align="left">38 - 46</td>
<td align="left">9</td>
<td align="left">Vr</td>
<td align="left">Vertical rate</td>
</tr>
<tr class="odd">
<td align="left">79 - 80</td>
<td align="left">47 - 48</td>
<td align="left">2</td>
<td align="left">RESV_B</td>
<td align="left">Reserved-B</td>
</tr>
<tr class="even">
<td align="left">81</td>
<td align="left">49</td>
<td align="left">1</td>
<td align="left">S_Dif</td>
<td align="left">Diff from baro alt, sign</td>
</tr>
<tr class="odd">
<td align="left">82 - 88</td>
<td align="left">50 - 56</td>
<td align="left">7</td>
<td align="left">Dif</td>
<td align="left">Diff from baro alt</td>
</tr>
</tbody>
</table>
<h3 id="horizontal-velocity">Horizontal Velocity</h3>
<p>For calculating the horizontal speed and heading we need four values, East-West Velocity <code>V_ew</code>, East-West Velocity Sign <code>S_ew</code>, North-South Velocity <code>V_ns</code>, North-South Velocity Sign <code>S_ns</code>. And pay attention on the directions (signs) in the calculation.</p>
<pre><code>S_ns:
    1 -&gt; flying North to South
    0 -&gt; flying South to North
S_ew:
    1 -&gt; flying East to West
    0 -&gt; flying West to East</code></pre>
<p>The Speed (v) and heading (h) with unit knot and degree can be computed as follows:</p>
<p><span class="math display">\[V_{we} =
\begin{cases}
 -1 \cdot (V_{ew} - 1)    &amp; \text{if } s_{ew} = 1 \\
 V_{ew} - 1         &amp; \text{if } s_{ew} = 0
\end{cases}\]</span></p>
<p><span class="math display">\[V_{sn} =
\begin{cases}
 -1 \cdot (V_{ns} - 1)    &amp; \text{if } s_{ns} = 1 \\
 V_{ns} - 1         &amp; \text{if } s_{ns} = 0
\end{cases}\]</span></p>
<p><span class="math display">\[v = \sqrt{V_{we}^{2} + V_{sn}^{2}}\]</span></p>
<p><span class="math display">\[h = arctan2 \left( V_{we}, V_{sn} \right) \cdot \frac{360}{2\pi}  \quad \text{(deg)}\]</span></p>
<p>In case of a negative value here, we will simply add 360 degrees.</p>
<p><span class="math display">\[h = h + 360  \quad (\text{if } h &lt; 0)\]</span></p>
<p>So, now we have the speed and heading of our example:</p>
<pre><code>V-EW: 0000001001 -&gt; 9
S-EW: 1
V-NS: 0010100000 -&gt; 160
S-NS: 1

V_{we} = - (9 - 1) = -8
V_{sn} = - (160 - 1) = -159

v = 159.20 (kt)
h = 182.88 (deg)</code></pre>
<h3 id="vertical-rate">Vertical Rate</h3>
<p>The direction of vertical movement of aircraft can be read from <code>S_vr</code> field, in message bit-69:</p>
<pre><code>0 -&gt; UP
1 -&gt; Down</code></pre>
<p>The actual vertical rate <code>Vr</code> is the value of bits 70-78, minus 1, and then multiplied by 64 in <strong>feet/minute</strong> (ft/min). In our example:</p>
<pre><code>Vr-bits: 000001110 = 14
Vr: (14 - 1) x 64 =&gt; 832 fpm
S-Vr: 0 =&gt; Down / Descending</code></pre>
<p>So we see a descending aircraft at 832 ft/min rate of descend.</p>
<p>The Vertical Rate Source (VrSrc) field determines if it is a measurement in barometric pressure altitude or geometric altitude:</p>
<pre><code>0 -&gt;  Baro-pressure altitude change rate
1 -&gt;  Geometric altitude change rate</code></pre>
<h2 id="subtype-3-airspeed">Subtype 3 (Airspeed)</h2>
<p>Subtype 3 (subsonic, airspeed), are broadcast when ground speed information is NOT available, while airspeed is available. The structure of the message is similar to the previous one. Let’s take a close look at an example for decoding here.</p>
<pre><code>Message: 8DA05F219B06B6AF189400CBC33F

|    | ICAO24 |      DATA      |  CRC   |
|----|--------|----------------|--------|
| 8D | A05F21 | 9B06B6AF189400 | CBC33F |

Convert DATA [9B06B6AF189400] into binary:

|-------|-----|----|--------|-----|------|------------|------|------------|
|  TC   | ST  | IC | RESV_A | NAC | S_hdg| Hdg        | AS-t | AS         |
|-------|-----|----|--------|-----|------|------------|------|------------|
| 10011 | 011 | 0  | 0      | 000 | 1    | 1010110110 | 1    | 0101111000 |

|-------|------|-----------|--------|-------|---------|
| VrSrc | S-Vr | Vr        | RESV_B | S_Dif | Dif     |
|-------|------|-----------|--------|-------|---------|
| 1     | 1    | 000100101 | 00     | 0     | 0000000 |</code></pre>
<p>The details on all data bits are described in following Table [tb:adsb-v-bits-st-3]:</p>
<table>
<caption>Airborne velocity message bits explained - Subtype 3<span data-label="tb:adsb-v-bits-st-3"></span></caption>
<thead>
<tr class="header">
<th align="left">DATA Bits</th>
<th align="left">MSG Bits</th>
<th align="left">Len</th>
<th align="left">Abbr</th>
<th align="left">Content</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">33 - 37</td>
<td align="left">1 - 5</td>
<td align="left">5</td>
<td align="left">TC</td>
<td align="left">Type code</td>
</tr>
<tr class="even">
<td align="left">38 - 40</td>
<td align="left">6 - 8</td>
<td align="left">3</td>
<td align="left">ST</td>
<td align="left">Subtype</td>
</tr>
<tr class="odd">
<td align="left">41</td>
<td align="left">9</td>
<td align="left">1</td>
<td align="left">IC</td>
<td align="left">Intent change flag</td>
</tr>
<tr class="even">
<td align="left">42</td>
<td align="left">10</td>
<td align="left">1</td>
<td align="left">RESV_A</td>
<td align="left">Reserved-A</td>
</tr>
<tr class="odd">
<td align="left">43 - 45</td>
<td align="left">11 - 13</td>
<td align="left">3</td>
<td align="left">NAC</td>
<td align="left">Velocity uncertainty (NAC)</td>
</tr>
<tr class="even">
<td align="left">46</td>
<td align="left">14</td>
<td align="left">1</td>
<td align="left">S_hdg</td>
<td align="left">Heading status</td>
</tr>
<tr class="odd">
<td align="left">47 - 56</td>
<td align="left">15 - 24</td>
<td align="left">10</td>
<td align="left">Hdg</td>
<td align="left">Heading (proportion)</td>
</tr>
<tr class="even">
<td align="left">57</td>
<td align="left">25</td>
<td align="left">1</td>
<td align="left">AS-t</td>
<td align="left">Airspeed Type</td>
</tr>
<tr class="odd">
<td align="left">58 - 67</td>
<td align="left">26 - 35</td>
<td align="left">10</td>
<td align="left">AS</td>
<td align="left">Airspeed</td>
</tr>
<tr class="even">
<td align="left">68</td>
<td align="left">36</td>
<td align="left">1</td>
<td align="left">VrSrc</td>
<td align="left">Vertical rate source</td>
</tr>
<tr class="odd">
<td align="left">69</td>
<td align="left">37</td>
<td align="left">1</td>
<td align="left">S_vr</td>
<td align="left">Vertical rate sign</td>
</tr>
<tr class="even">
<td align="left">70 - 78</td>
<td align="left">38 - 46</td>
<td align="left">9</td>
<td align="left">Vr</td>
<td align="left">Vertical rate</td>
</tr>
<tr class="odd">
<td align="left">79 - 80</td>
<td align="left">47 - 48</td>
<td align="left">2</td>
<td align="left">RESV_B</td>
<td align="left">Reserved-B</td>
</tr>
<tr class="even">
<td align="left">81</td>
<td align="left">49</td>
<td align="left">1</td>
<td align="left">S_Dif</td>
<td align="left">Difference from baro alt, sign</td>
</tr>
<tr class="odd">
<td align="left">82 - 88</td>
<td align="left">50 - 66</td>
<td align="left">7</td>
<td align="left">Dif</td>
<td align="left">Difference from baro alt</td>
</tr>
</tbody>
</table>
<h3 id="heading">Heading</h3>
<p><code>S_hdg</code> makes the status of heading data:</p>
<pre><code>0 -&gt; heading data not available
1 -&gt; heading data available</code></pre>
<p>10-bits <code>Hdg</code> is the represent the proportion of the degrees of a full circle, i.e. 360 degrees. (Note: 0000000000 - 1111111111 represents 0 - 1023 )</p>
<p><span class="math display">\[heading = Decimal(Hdg) / 1024 * 360^o\]</span></p>
<p>in our example :</p>
<pre><code>1010110110 -&gt; 694
heading = 694 / 1024 * 360 = 243.98 (degree)</code></pre>
<h3 id="velocity-airspeed">Velocity (Airspeed)</h3>
<p>To find out which type of the airspeed (TAS or IAS), first we need to look at the <code>AS-t</code> field:</p>
<pre><code>0 -&gt; Indicated Airspeed (IAS)
1 -&gt; True Airspeed (TAS)</code></pre>
<p>And then the speed is simply a binary to decimal conversion of <code>AS</code> bits (in knot). In our example:</p>
<pre><code>0101111000 -&gt; 376 knot</code></pre>
<h3 id="vertical-rate-1">Vertical Rate</h3>
<p>The vertical rate decoding remains the same as subtype 1.</p>

<footer class="mastfoot">
  <div class="text-right">
    <p>Site maintained by <a href="https://github.com/junzis">@junzis</a>. Build with LaTeX, Pandoc, and GitHub</p>
  </div>
</footer>

</div>
</div>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-74700456-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-74700456-1');
</script>

</body>
</html>
