
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>2.1. Introduction &#8212; The 1090MHz Riddle Book</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="2.2. Aircraft identification (BDS 2,0)" href="bds20-identification.html" />
    <link rel="prev" title="2. EHS (Mode-S Enhanced Surveillance)" href="index.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body>
  <div class="document">
    
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><h3><a href="../index.html">The 1090MHz Riddle</a></h3>

An Open access book on Mode-S/ADS-B decoding and related topics

<br/><br/><h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../adsb/index.html">1. ADS-B (Automatic Dependent Surveillance – Broadcast)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../adsb/introduction.html">1.1. Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../adsb/identification.html">1.2. Aircraft Identification</a></li>
<li class="toctree-l2"><a class="reference internal" href="../adsb/compact-position-report.html">1.3. Compact Position Reporting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../adsb/airborne-position.html">1.4. Airborne Positions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../adsb/airborne-velocity.html">1.5. Airborne Velocity</a></li>
<li class="toctree-l2"><a class="reference internal" href="../adsb/integrity-accuracy.html">1.6. Integrity and Accuracy</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">2. EHS (Mode-S Enhanced Surveillance)</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">2.1. Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="bds20-identification.html">2.2. Aircraft identification (BDS 2,0)</a></li>
<li class="toctree-l2"><a class="reference internal" href="bds40-intention.html">2.3. Selected intention (BDS 4,0)</a></li>
<li class="toctree-l2"><a class="reference internal" href="bds50-track-n-turn.html">2.4. Track and turn (BDS 5,0)</a></li>
<li class="toctree-l2"><a class="reference internal" href="bds60-airspeed.html">2.5. Heading and speed (BDS 6,0)</a></li>
</ul>
</li>
</ul>


  <br/>
  <h3>Page Source</h3>
  <ul class="this-page-menu">
    <!-- <li><a href="../_sources/ehs/introduction.rst.txt"
           rel="nofollow">Show Source</a></li> -->
    <li><a href="https://github.com/junzis/the-1090mhz-riddle/blob/master/ehs/introduction.rst"
           rel="nofollow">Show on GitHub</a></li>
    <li><a href="https://github.com/junzis/the-1090mhz-riddle/edit/master/ehs/introduction.rst"
           rel="nofollow">Edit on GitHub</a></li>
  </ul>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="introduction">
<h1>2.1. Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h1>
<div class="section" id="downlink-format-and-message-structure">
<h2>2.1.1. Downlink Format and message structure<a class="headerlink" href="#downlink-format-and-message-structure" title="Permalink to this headline">¶</a></h2>
<p>DF 20 and DF 21 are used for downlink messages.</p>
<p>The same as ADS-B, in all Mode-S messages, the first 5 bit contains the Downlink Format. The same identification process can be used for discover EHS messages. So the EHS messages starting bits are:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">DF20</span> <span class="o">-</span> <span class="mi">10100</span>
<span class="n">DF21</span> <span class="o">-</span> <span class="mi">10101</span>
</pre></div>
</div>
<p>The message is structured as following, where the digit represents the number of binary digits:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">+--------+--------+--------+--------+-------------+------------------+------------+</span>
<span class="o">|</span>  <span class="n">DF</span> <span class="mi">5</span>  <span class="o">|</span>  <span class="n">FS</span> <span class="mi">3</span>  <span class="o">|</span>  <span class="n">DR</span> <span class="mi">5</span>  <span class="o">|</span>  <span class="n">UM</span> <span class="mi">6</span>  <span class="o">|</span>    <span class="n">AC</span> <span class="mi">13</span>    <span class="o">|</span>       <span class="n">MB</span> <span class="mi">56</span>      <span class="o">|</span>  <span class="n">AP</span><span class="o">/</span><span class="n">DP</span> <span class="mi">24</span>  <span class="o">|</span>
<span class="o">+-----------------+--------+-----------------------------------------+------------+</span>
<span class="o">|</span>    <span class="o">&lt;---------+</span>      <span class="mi">32</span> <span class="n">bits</span>      <span class="o">+--------&gt;</span>     <span class="o">|</span>


<span class="n">DF</span><span class="p">:</span>     <span class="n">downlink</span> <span class="nb">format</span>
<span class="n">FS</span><span class="p">:</span>     <span class="n">flight</span> <span class="n">status</span>
<span class="n">DR</span><span class="p">:</span>     <span class="n">downlink</span> <span class="n">request</span>
<span class="n">UM</span><span class="p">:</span>     <span class="n">utility</span> <span class="n">message</span>
<span class="n">ID</span><span class="p">:</span>     <span class="n">identity</span>
<span class="n">MB</span><span class="p">:</span>     <span class="n">message</span><span class="p">,</span> <span class="n">Comm</span><span class="o">-</span><span class="n">B</span>
<span class="n">AP</span><span class="o">/</span><span class="n">DP</span><span class="p">:</span>  <span class="n">address</span><span class="o">/</span><span class="n">parity</span> <span class="ow">or</span> <span class="n">data</span><span class="o">/</span><span class="n">parity</span>
</pre></div>
</div>
<p>Except the DF, the first 32 bits does not contain useful information for decode the message. The exact definitions can be found in ICAO annex 10 (Aeronautical Telecommunications).</p>
</div>
<div class="section" id="parity-and-icao-address-recovery">
<h2>2.1.2. Parity and ICAO address recovery<a class="headerlink" href="#parity-and-icao-address-recovery" title="Permalink to this headline">¶</a></h2>
<p>Unlike ADS-B, the ICAO address is not broadcast along with the EHS messages. We will have to “decode” the ICAO address before decoding other information, and ICAO is hidden in the message and checksum.</p>
<p>Mode-S uses two types of parity checksum Address Parity (AP) and Data Parity (DP). Majority of the time Address Parity is used.</p>
<div class="section" id="address-parity">
<h3>2.1.2.1. Address Parity<a class="headerlink" href="#address-parity" title="Permalink to this headline">¶</a></h3>
<p>For AP, message parity field is produced by XOR ICAO with message data CRC checksum. So, to recover the ICAO bits, simply reverse XOR process will work, shown as follows:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">+-------------------------------+</span>  <span class="o">+------------------+</span>
<span class="o">|</span>   <span class="n">DATA</span> <span class="n">FIELD</span> <span class="p">(</span><span class="mi">32</span> <span class="n">OR</span> <span class="mi">88</span> <span class="n">BIT</span><span class="p">)</span>   <span class="o">|</span>  <span class="o">|</span>   <span class="n">PARITY</span> <span class="n">BITS</span>    <span class="o">|</span>
<span class="o">+--------------+----------------+</span>  <span class="o">+------------------+</span>
               <span class="o">|</span>
               <span class="o">|</span>                           <span class="n">XOR</span>
               <span class="n">v</span>
<span class="o">+--------------+-----------+</span>       <span class="o">+------------------+</span>
<span class="o">|</span>          <span class="n">ENCODER</span>         <span class="o">|</span>  <span class="o">+--&gt;</span> <span class="o">|</span> <span class="n">CHECKSUM</span> <span class="p">(</span><span class="mi">24</span><span class="n">BIT</span><span class="p">)</span> <span class="o">|</span>
<span class="o">+--------------------------+</span>       <span class="o">+------------------+</span>
                                            <span class="o">||</span>
                                   <span class="o">+------------------+</span>
                                   <span class="o">|</span>   <span class="n">ICAO</span> <span class="p">(</span><span class="mi">24</span><span class="n">BIT</span><span class="p">)</span>   <span class="o">|</span>
                                   <span class="o">+------------------+</span>
</pre></div>
</div>
<p>An example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">Message</span><span class="p">:</span>      <span class="n">A0001838CA380031440000F24177</span>

<span class="n">Data</span><span class="p">:</span>         <span class="n">A0001838CA380031440000</span>
<span class="n">Parity</span><span class="p">:</span>                             <span class="n">F24177</span>

<span class="n">Encode</span> <span class="n">data</span><span class="p">:</span>  <span class="n">CE2CA7</span>

<span class="n">ICAO</span><span class="p">:</span>    <span class="p">[</span><span class="n">F24177</span><span class="p">]</span> <span class="n">XOR</span> <span class="p">[</span><span class="n">CE2CA7</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="mi">3</span><span class="n">C6DD0</span><span class="p">]</span>
</pre></div>
</div>
<p>For the implementation of CRC encoder, refer to the pyModeS library <code class="docutils literal"><span class="pre">pyModeS.util.crc(msg,</span> <span class="pre">encode=True)</span></code></p>
</div>
</div>
<div class="section" id="bds-comm-b-data-selector">
<h2>2.1.3. BDS (Comm-B Data Selector)<a class="headerlink" href="#bds-comm-b-data-selector" title="Permalink to this headline">¶</a></h2>
<p>In simply words, BDS is a number (usually a 2-digit hexadecimal) that defines the type of message we are looking at. Both ADS-B messages and other types of Mods-S messages are all assigned their distinctive BDS number. However, it is <strong>no where</strong> to be found in the messages.</p>
<p>When SSR interrogates aircraft, a BDS code is included in request message ( Uplink Format - UF 4, 5, 20, or 21). This BDS code are then used by the aircraft transponder to register the type of message to be sent. But when the downlink message is transmitted, its BDS code is not included in the message (because the SSR knows what kind message it requested). Good new for them, but challenges for us.</p>
<p>Here are some BDS codes that we are interested, where additional parameters about aircraft can be found:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">BDS</span> <span class="mi">2</span><span class="p">,</span><span class="mi">0</span>   <span class="n">Aircraft</span> <span class="n">identification</span>
<span class="n">BDS</span> <span class="mi">2</span><span class="p">,</span><span class="mi">1</span>   <span class="n">Aircraft</span> <span class="ow">and</span> <span class="n">airline</span> <span class="n">registration</span> <span class="n">markings</span>
<span class="n">BDS</span> <span class="mi">4</span><span class="p">,</span><span class="mi">0</span>   <span class="n">Selected</span> <span class="n">vertical</span> <span class="n">intention</span>
<span class="n">BDS</span> <span class="mi">4</span><span class="p">,</span><span class="mi">4</span>   <span class="n">Meteorological</span> <span class="n">routine</span> <span class="n">air</span> <span class="n">report</span>
<span class="n">BDS</span> <span class="mi">5</span><span class="p">,</span><span class="mi">0</span>   <span class="n">Track</span> <span class="ow">and</span> <span class="n">turn</span> <span class="n">report</span>
<span class="n">BDS</span> <span class="mi">6</span><span class="p">,</span><span class="mi">0</span>   <span class="n">Heading</span> <span class="ow">and</span> <span class="n">speed</span> <span class="n">report</span>
</pre></div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
    <div class="clearer"></div>
  </div>

    <div class="footer">
      &copy;2018, Junzi Sun.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.6.6</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.10</a>
      
      |
      <a href="../_sources/ehs/introduction.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-74700456-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-74700456-1');
</script>


  </body>
</html>