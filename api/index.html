

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Welcome to pyModeS documentation! &mdash; pyModeS  documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="pyModeS  documentation" href="#"/>
        <link rel="next" title="pyModeS.decoder.adsb module" href="pyModeS.decoder.adsb.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="#" class="icon icon-home"> pyModeS
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <p class="caption"><span class="caption-text">Core modules</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="pyModeS.decoder.adsb.html">pyModeS.decoder.adsb module</a></li>
<li class="toctree-l1"><a class="reference internal" href="pyModeS.decoder.commb.html">pyModeS.decoder.commb module</a></li>
</ul>
<p class="caption"><span class="caption-text">ADS-B messages</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="pyModeS.decoder.bds.bds05.html">pyModeS.decoder.bds.bds05 module</a></li>
<li class="toctree-l1"><a class="reference internal" href="pyModeS.decoder.bds.bds06.html">pyModeS.decoder.bds.bds06 module</a></li>
<li class="toctree-l1"><a class="reference internal" href="pyModeS.decoder.bds.bds08.html">pyModeS.decoder.bds.bds08 module</a></li>
<li class="toctree-l1"><a class="reference internal" href="pyModeS.decoder.bds.bds09.html">pyModeS.decoder.bds.bds09 module</a></li>
</ul>
<p class="caption"><span class="caption-text">ELS - elementary surveillance</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="pyModeS.decoder.bds.bds10.html">pyModeS.decoder.bds.bds10 module</a></li>
<li class="toctree-l1"><a class="reference internal" href="pyModeS.decoder.bds.bds17.html">pyModeS.decoder.bds.bds17 module</a></li>
<li class="toctree-l1"><a class="reference internal" href="pyModeS.decoder.bds.bds20.html">pyModeS.decoder.bds.bds20 module</a></li>
<li class="toctree-l1"><a class="reference internal" href="pyModeS.decoder.bds.bds30.html">pyModeS.decoder.bds.bds30 module</a></li>
</ul>
<p class="caption"><span class="caption-text">EHS - enhanced surveillance</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="pyModeS.decoder.bds.bds40.html">pyModeS.decoder.bds.bds40 module</a></li>
<li class="toctree-l1"><a class="reference internal" href="pyModeS.decoder.bds.bds50.html">pyModeS.decoder.bds.bds50 module</a></li>
<li class="toctree-l1"><a class="reference internal" href="pyModeS.decoder.bds.bds60.html">pyModeS.decoder.bds.bds60 module</a></li>
</ul>
<p class="caption"><span class="caption-text">MRAR / MHR</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="pyModeS.decoder.bds.bds44.html">pyModeS.decoder.bds.bds44 module</a></li>
<li class="toctree-l1"><a class="reference internal" href="pyModeS.decoder.bds.bds45.html">pyModeS.decoder.bds.bds45 module</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="#">pyModeS</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="#">Docs</a> &raquo;</li>
        
      <li>Welcome to pyModeS documentation!</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/index.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="welcome-to-pymodes-documentation">
<h1>Welcome to pyModeS documentation!<a class="headerlink" href="#welcome-to-pymodes-documentation" title="Permalink to this headline">¶</a></h1>
<p>The source code can be found at: <a class="reference external" href="https://github.com/junzis/pyModeS">https://github.com/junzis/pyModeS</a></p>
<div class="toctree-wrapper compound">
<p class="caption"><span class="caption-text">Core modules</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="pyModeS.decoder.adsb.html">pyModeS.decoder.adsb module</a></li>
<li class="toctree-l1"><a class="reference internal" href="pyModeS.decoder.commb.html">pyModeS.decoder.commb module</a></li>
</ul>
</div>
<div class="toctree-wrapper compound">
<p class="caption"><span class="caption-text">ADS-B messages</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="pyModeS.decoder.bds.bds05.html">pyModeS.decoder.bds.bds05 module</a></li>
<li class="toctree-l1"><a class="reference internal" href="pyModeS.decoder.bds.bds06.html">pyModeS.decoder.bds.bds06 module</a></li>
<li class="toctree-l1"><a class="reference internal" href="pyModeS.decoder.bds.bds08.html">pyModeS.decoder.bds.bds08 module</a></li>
<li class="toctree-l1"><a class="reference internal" href="pyModeS.decoder.bds.bds09.html">pyModeS.decoder.bds.bds09 module</a></li>
</ul>
</div>
<div class="toctree-wrapper compound">
<p class="caption"><span class="caption-text">ELS - elementary surveillance</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="pyModeS.decoder.bds.bds10.html">pyModeS.decoder.bds.bds10 module</a></li>
<li class="toctree-l1"><a class="reference internal" href="pyModeS.decoder.bds.bds17.html">pyModeS.decoder.bds.bds17 module</a></li>
<li class="toctree-l1"><a class="reference internal" href="pyModeS.decoder.bds.bds20.html">pyModeS.decoder.bds.bds20 module</a></li>
<li class="toctree-l1"><a class="reference internal" href="pyModeS.decoder.bds.bds30.html">pyModeS.decoder.bds.bds30 module</a></li>
</ul>
</div>
<div class="toctree-wrapper compound">
<p class="caption"><span class="caption-text">EHS - enhanced surveillance</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="pyModeS.decoder.bds.bds40.html">pyModeS.decoder.bds.bds40 module</a></li>
<li class="toctree-l1"><a class="reference internal" href="pyModeS.decoder.bds.bds50.html">pyModeS.decoder.bds.bds50 module</a></li>
<li class="toctree-l1"><a class="reference internal" href="pyModeS.decoder.bds.bds60.html">pyModeS.decoder.bds.bds60 module</a></li>
</ul>
</div>
<div class="toctree-wrapper compound">
<p class="caption"><span class="caption-text">MRAR / MHR</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="pyModeS.decoder.bds.bds44.html">pyModeS.decoder.bds.bds44 module</a></li>
<li class="toctree-l1"><a class="reference internal" href="pyModeS.decoder.bds.bds45.html">pyModeS.decoder.bds.bds45 module</a></li>
</ul>
</div>
</div>
<hr class="docutils" />
<div class="section" id="the-python-ads-b-mode-s-decoder">
<h1>The Python ADS-B/Mode-S Decoder<a class="headerlink" href="#the-python-ads-b-mode-s-decoder" title="Permalink to this headline">¶</a></h1>
<p>PyModeS is a Python library designed to decode Mode-S (including ADS-B) message. It can be imported to your python project or used as a standalone tool to view and save live traffic data.</p>
<p>This is a project created by Junzi Sun, who works at <a class="reference external" href="https://www.tudelft.nl/en/">TU Delft</a>, <a class="reference external" href="https://www.tudelft.nl/en/ae/">Aerospace Engineering Faculty</a>, <a class="reference external" href="http://cs.lr.tudelft.nl/atm/">CNS/ATM research group</a>. It is supported by many <a class="reference external" href="https://github.com/junzis/pyModeS/graphs/contributors">contributors</a> from different institutions.</p>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>pyModeS supports the decoding of following types of messages:</p>
<ul class="simple">
<li><p>DF4 / DF20: Altitude code</p></li>
<li><p>DF5 / DF21: Identity code (squawk code)</p></li>
<li><p>DF17 / DF18: Automatic Dependent Surveillance-Broadcast (ADS-B)</p>
<ul>
<li><p>TC=1-4  / BDS 0,8: Aircraft identification and category</p></li>
<li><p>TC=5-8  / BDS 0,6: Surface position</p></li>
<li><p>TC=9-18 / BDS 0,5: Airborne position</p></li>
<li><p>TC=19   / BDS 0,9: Airborne velocity</p></li>
<li><p>TC=28   / BDS 6,1: Airborne status [to be implemented]</p></li>
<li><p>TC=29   / BDS 6,2: Target state and status information [to be implemented]</p></li>
<li><p>TC=31   / BDS 6,5: Aircraft operational status [to be implemented]</p></li>
</ul>
</li>
<li><p>DF20 / DF21: Mode-S Comm-B messages</p>
<ul>
<li><p>BDS 1,0: Data link capability report</p></li>
<li><p>BDS 1,7: Common usage GICB capability report</p></li>
<li><p>BDS 2,0: Aircraft identification</p></li>
<li><p>BDS 3,0: ACAS active resolution advisory</p></li>
<li><p>BDS 4,0: Selected vertical intention</p></li>
<li><p>BDS 4,4: Meteorological routine air report (experimental)</p></li>
<li><p>BDS 4,5: Meteorological hazard report (experimental)</p></li>
<li><p>BDS 5,0: Track and turn report</p></li>
<li><p>BDS 6,0: Heading and speed report</p></li>
</ul>
</li>
</ul>
<p>If you find this project useful for your research, please considering cite this tool as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@article</span><span class="p">{</span><span class="n">sun2019pymodes</span><span class="p">,</span>
    <span class="n">author</span><span class="o">=</span><span class="p">{</span><span class="n">J</span><span class="o">.</span> <span class="p">{</span><span class="n">Sun</span><span class="p">}</span> <span class="ow">and</span> <span class="n">H</span><span class="o">.</span> <span class="p">{</span><span class="n">V</span>\<span class="o">^</span><span class="n">u</span><span class="p">}</span> <span class="ow">and</span> <span class="n">J</span><span class="o">.</span> <span class="p">{</span><span class="n">Ellerbroek</span><span class="p">}</span> <span class="ow">and</span> <span class="n">J</span><span class="o">.</span> <span class="n">M</span><span class="o">.</span> <span class="p">{</span><span class="n">Hoekstra</span><span class="p">}},</span>
    <span class="n">journal</span><span class="o">=</span><span class="p">{</span><span class="n">IEEE</span> <span class="n">Transactions</span> <span class="n">on</span> <span class="n">Intelligent</span> <span class="n">Transportation</span> <span class="n">Systems</span><span class="p">},</span>
    <span class="n">title</span><span class="o">=</span><span class="p">{</span><span class="n">pyModeS</span><span class="p">:</span> <span class="n">Decoding</span> <span class="n">Mode</span><span class="o">-</span><span class="n">S</span> <span class="n">Surveillance</span> <span class="n">Data</span> <span class="k">for</span> <span class="n">Open</span> <span class="n">Air</span> <span class="n">Transportation</span> <span class="n">Research</span><span class="p">},</span>
    <span class="n">year</span><span class="o">=</span><span class="p">{</span><span class="mi">2019</span><span class="p">},</span>
    <span class="n">doi</span><span class="o">=</span><span class="p">{</span><span class="mf">10.1109</span><span class="o">/</span><span class="n">TITS</span><span class="o">.</span><span class="mf">2019.2914770</span><span class="p">},</span>
    <span class="n">ISSN</span><span class="o">=</span><span class="p">{</span><span class="mi">1524</span><span class="o">-</span><span class="mi">9050</span><span class="p">},</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="resources">
<h2>Resources<a class="headerlink" href="#resources" title="Permalink to this headline">¶</a></h2>
<p>Check out and contribute to this open-source project at:
<a class="reference external" href="https://github.com/junzis/pyModeS">https://github.com/junzis/pyModeS</a></p>
<p>Detailed manual on Mode-S decoding is published at:
<a class="reference external" href="https://mode-s.org/decode">https://mode-s.org/decode</a>.</p>
<p>The API documentation of pyModeS is at:
<a class="reference external" href="http://pymodes.readthedocs.io">http://pymodes.readthedocs.io</a></p>
</div>
<div class="section" id="basic-installation">
<h2>Basic installation<a class="headerlink" href="#basic-installation" title="Permalink to this headline">¶</a></h2>
<p>Installation examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># stable version</span>
<span class="n">pip</span> <span class="n">install</span> <span class="n">pyModeS</span>

<span class="c1"># development version</span>
<span class="n">pip</span> <span class="n">install</span> <span class="n">git</span><span class="o">+</span><span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">junzis</span><span class="o">/</span><span class="n">pyModeS</span>
</pre></div>
</div>
<p>Dependencies <code class="docutils literal notranslate"><span class="pre">numpy</span></code>, <code class="docutils literal notranslate"><span class="pre">pyzmq</span></code> and <code class="docutils literal notranslate"><span class="pre">pyrtlsdr</span></code> are installed automatically during previous installations processes.</p>
</div>
<div class="section" id="advanced-installation-using-c-modules">
<h2>Advanced installation (using c modules)<a class="headerlink" href="#advanced-installation-using-c-modules" title="Permalink to this headline">¶</a></h2>
<p>If you want to make use of the (faster) c module, install <code class="docutils literal notranslate"><span class="pre">pyModeS</span></code> as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">clone</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">junzis</span><span class="o">/</span><span class="n">pyModeS</span>
<span class="n">cd</span> <span class="n">pyModeS</span>
<span class="n">make</span> <span class="n">ext</span>
<span class="n">make</span> <span class="n">install</span>
</pre></div>
</div>
</div>
<div class="section" id="view-live-traffic-modeslive">
<h2>View live traffic (modeslive)<a class="headerlink" href="#view-live-traffic-modeslive" title="Permalink to this headline">¶</a></h2>
<p>General usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ modeslive [-h] --source SOURCE [--connect SERVER PORT DATAYPE]
            [--latlon LAT LON] [--show-uncertainty] [--dumpto DUMPTO]

arguments:
 -h, --help            show this help message and exit
 --source SOURCE       Choose data source, &quot;rtlsdr&quot; or &quot;net&quot;
 --connect SERVER PORT DATATYPE
                       Define server, port and data type. Supported data
                       types are: [&#39;raw&#39;, &#39;beast&#39;, &#39;skysense&#39;]
 --latlon LAT LON      Receiver latitude and longitude, needed for the surface
                       position, default none
 --show-uncertainty    Display uncertainty values, default off
 --dumpto DUMPTO       Folder to dump decoded output, default none
</pre></div>
</div>
<div class="section" id="live-with-rtl-sdr">
<h3>Live with RTL-SDR<a class="headerlink" href="#live-with-rtl-sdr" title="Permalink to this headline">¶</a></h3>
<p>If you have an RTL-SDR receiver plugged to the computer, you can connect it with <code class="docutils literal notranslate"><span class="pre">rtlsdr</span></code> source switch, shown as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ modeslive --source rtlsdr
</pre></div>
</div>
</div>
<div class="section" id="live-with-network-data">
<h3>Live with network data<a class="headerlink" href="#live-with-network-data" title="Permalink to this headline">¶</a></h3>
<p>If you want to connect to a TCP server that broadcast raw data. use can use <code class="docutils literal notranslate"><span class="pre">net</span></code> source switch, for example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ modeslive --source net --connect localhost 30002 raw
$ modeslive --source net --connect 127.0.0.1 30005 beast
</pre></div>
</div>
<p>Example screenshot:</p>
<a class="reference internal image-reference" href="https://github.com/junzis/pyModeS/raw/master/doc/modeslive-screenshot.png"><img alt="https://github.com/junzis/pyModeS/raw/master/doc/modeslive-screenshot.png" src="https://github.com/junzis/pyModeS/raw/master/doc/modeslive-screenshot.png" style="width: 700px;" /></a>
</div>
</div>
<div class="section" id="use-the-library">
<h2>Use the library<a class="headerlink" href="#use-the-library" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pyModeS</span> <span class="k">as</span> <span class="nn">pms</span>
</pre></div>
</div>
<div class="section" id="common-functions">
<h3>Common functions<a class="headerlink" href="#common-functions" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">pms</span><span class="o">.</span><span class="n">df</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>                 <span class="c1"># Downlink Format</span>
<span class="n">pms</span><span class="o">.</span><span class="n">icao</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>               <span class="c1"># Infer the ICAO address from the message</span>
<span class="n">pms</span><span class="o">.</span><span class="n">crc</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span> <span class="n">encode</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>  <span class="c1"># Perform CRC or generate parity bit</span>

<span class="n">pms</span><span class="o">.</span><span class="n">hex2bin</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span>      <span class="c1"># Convert hexadecimal string to binary string</span>
<span class="n">pms</span><span class="o">.</span><span class="n">bin2int</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span>      <span class="c1"># Convert binary string to integer</span>
<span class="n">pms</span><span class="o">.</span><span class="n">hex2int</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span>      <span class="c1"># Convert hexadecimal string to integer</span>
<span class="n">pms</span><span class="o">.</span><span class="n">gray2int</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span>     <span class="c1"># Convert grey code to integer</span>
</pre></div>
</div>
</div>
<div class="section" id="core-functions-for-ads-b-decoding">
<h3>Core functions for ADS-B decoding<a class="headerlink" href="#core-functions-for-ads-b-decoding" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">pms</span><span class="o">.</span><span class="n">adsb</span><span class="o">.</span><span class="n">icao</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
<span class="n">pms</span><span class="o">.</span><span class="n">adsb</span><span class="o">.</span><span class="n">typecode</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

<span class="c1"># Typecode 1-4</span>
<span class="n">pms</span><span class="o">.</span><span class="n">adsb</span><span class="o">.</span><span class="n">callsign</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

<span class="c1"># Typecode 5-8 (surface), 9-18 (airborne, barometric height), and 20-22 (airborne, GNSS height)</span>
<span class="n">pms</span><span class="o">.</span><span class="n">adsb</span><span class="o">.</span><span class="n">position</span><span class="p">(</span><span class="n">msg_even</span><span class="p">,</span> <span class="n">msg_odd</span><span class="p">,</span> <span class="n">t_even</span><span class="p">,</span> <span class="n">t_odd</span><span class="p">,</span> <span class="n">lat_ref</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">lon_ref</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
<span class="n">pms</span><span class="o">.</span><span class="n">adsb</span><span class="o">.</span><span class="n">airborne_position</span><span class="p">(</span><span class="n">msg_even</span><span class="p">,</span> <span class="n">msg_odd</span><span class="p">,</span> <span class="n">t_even</span><span class="p">,</span> <span class="n">t_odd</span><span class="p">)</span>
<span class="n">pms</span><span class="o">.</span><span class="n">adsb</span><span class="o">.</span><span class="n">surface_position</span><span class="p">(</span><span class="n">msg_even</span><span class="p">,</span> <span class="n">msg_odd</span><span class="p">,</span> <span class="n">t_even</span><span class="p">,</span> <span class="n">t_odd</span><span class="p">,</span> <span class="n">lat_ref</span><span class="p">,</span> <span class="n">lon_ref</span><span class="p">)</span>
<span class="n">pms</span><span class="o">.</span><span class="n">adsb</span><span class="o">.</span><span class="n">surface_velocity</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

<span class="n">pms</span><span class="o">.</span><span class="n">adsb</span><span class="o">.</span><span class="n">position_with_ref</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span> <span class="n">lat_ref</span><span class="p">,</span> <span class="n">lon_ref</span><span class="p">)</span>
<span class="n">pms</span><span class="o">.</span><span class="n">adsb</span><span class="o">.</span><span class="n">airborne_position_with_ref</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span> <span class="n">lat_ref</span><span class="p">,</span> <span class="n">lon_ref</span><span class="p">)</span>
<span class="n">pms</span><span class="o">.</span><span class="n">adsb</span><span class="o">.</span><span class="n">surface_position_with_ref</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span> <span class="n">lat_ref</span><span class="p">,</span> <span class="n">lon_ref</span><span class="p">)</span>

<span class="n">pms</span><span class="o">.</span><span class="n">adsb</span><span class="o">.</span><span class="n">altitude</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

<span class="c1"># Typecode: 19</span>
<span class="n">pms</span><span class="o">.</span><span class="n">adsb</span><span class="o">.</span><span class="n">velocity</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>          <span class="c1"># Handles both surface &amp; airborne messages</span>
<span class="n">pms</span><span class="o">.</span><span class="n">adsb</span><span class="o">.</span><span class="n">speed_heading</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>     <span class="c1"># Handles both surface &amp; airborne messages</span>
<span class="n">pms</span><span class="o">.</span><span class="n">adsb</span><span class="o">.</span><span class="n">airborne_velocity</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
</pre></div>
</div>
<p>Note: When you have a fix position of the aircraft, it is convenient to use <cite>position_with_ref()</cite> method to decode with only one position message (either odd or even). This works with both airborne and surface position messages. But the reference position shall be within 180NM (airborne) or 45NM (surface) of the true position.</p>
</div>
<div class="section" id="decode-altitude-replies-in-df4-df20">
<h3>Decode altitude replies in DF4 / DF20<a class="headerlink" href="#decode-altitude-replies-in-df4-df20" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">pms</span><span class="o">.</span><span class="n">common</span><span class="o">.</span><span class="n">altcode</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>   <span class="c1"># Downlink format must be 4 or 20</span>
</pre></div>
</div>
</div>
<div class="section" id="decode-identity-replies-in-df5-df21">
<h3>Decode identity replies in DF5 / DF21<a class="headerlink" href="#decode-identity-replies-in-df5-df21" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">pms</span><span class="o">.</span><span class="n">common</span><span class="o">.</span><span class="n">idcode</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>   <span class="c1"># Downlink format must be 5 or 21</span>
</pre></div>
</div>
</div>
<div class="section" id="common-mode-s-functions">
<h3>Common Mode-S functions<a class="headerlink" href="#common-mode-s-functions" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">pms</span><span class="o">.</span><span class="n">icao</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>           <span class="c1"># Infer the ICAO address from the message</span>
<span class="n">pms</span><span class="o">.</span><span class="n">bds</span><span class="o">.</span><span class="n">infer</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>      <span class="c1"># Infer the Modes-S BDS register</span>

<span class="c1"># Check if BDS is 5,0 or 6,0, give reference speed, track, altitude (from ADS-B)</span>
<span class="n">pms</span><span class="o">.</span><span class="n">bds</span><span class="o">.</span><span class="n">is50or60</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span> <span class="n">spd_ref</span><span class="p">,</span> <span class="n">trk_ref</span><span class="p">,</span> <span class="n">alt_ref</span><span class="p">)</span>

<span class="c1"># Check each BDS explicitly</span>
<span class="n">pms</span><span class="o">.</span><span class="n">bds</span><span class="o">.</span><span class="n">bds10</span><span class="o">.</span><span class="n">is10</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
<span class="n">pms</span><span class="o">.</span><span class="n">bds</span><span class="o">.</span><span class="n">bds17</span><span class="o">.</span><span class="n">is17</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
<span class="n">pms</span><span class="o">.</span><span class="n">bds</span><span class="o">.</span><span class="n">bds20</span><span class="o">.</span><span class="n">is20</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
<span class="n">pms</span><span class="o">.</span><span class="n">bds</span><span class="o">.</span><span class="n">bds30</span><span class="o">.</span><span class="n">is30</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
<span class="n">pms</span><span class="o">.</span><span class="n">bds</span><span class="o">.</span><span class="n">bds40</span><span class="o">.</span><span class="n">is40</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
<span class="n">pms</span><span class="o">.</span><span class="n">bds</span><span class="o">.</span><span class="n">bds44</span><span class="o">.</span><span class="n">is44</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
<span class="n">pms</span><span class="o">.</span><span class="n">bds</span><span class="o">.</span><span class="n">bds50</span><span class="o">.</span><span class="n">is50</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
<span class="n">pms</span><span class="o">.</span><span class="n">bds</span><span class="o">.</span><span class="n">bds60</span><span class="o">.</span><span class="n">is60</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="mode-s-elementary-surveillance-els">
<h3>Mode-S Elementary Surveillance (ELS)<a class="headerlink" href="#mode-s-elementary-surveillance-els" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">pms</span><span class="o">.</span><span class="n">commb</span><span class="o">.</span><span class="n">ovc10</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>      <span class="c1"># Overlay capability, BDS 1,0</span>
<span class="n">pms</span><span class="o">.</span><span class="n">commb</span><span class="o">.</span><span class="n">cap17</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>      <span class="c1"># GICB capability, BDS 1,7</span>
<span class="n">pms</span><span class="o">.</span><span class="n">commb</span><span class="o">.</span><span class="n">cs20</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>       <span class="c1"># Callsign, BDS 2,0</span>
</pre></div>
</div>
</div>
<div class="section" id="mode-s-enhanced-surveillance-ehs">
<h3>Mode-S Enhanced Surveillance (EHS)<a class="headerlink" href="#mode-s-enhanced-surveillance-ehs" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># BDS 4,0</span>
<span class="n">pms</span><span class="o">.</span><span class="n">commb</span><span class="o">.</span><span class="n">selalt40mcp</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>   <span class="c1"># MCP/FCU selected altitude (ft)</span>
<span class="n">pms</span><span class="o">.</span><span class="n">commb</span><span class="o">.</span><span class="n">selalt40fms</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>   <span class="c1"># FMS selected altitude (ft)</span>
<span class="n">pms</span><span class="o">.</span><span class="n">commb</span><span class="o">.</span><span class="n">p40baro</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>    <span class="c1"># Barometric pressure (mb)</span>

<span class="c1"># BDS 5,0</span>
<span class="n">pms</span><span class="o">.</span><span class="n">commb</span><span class="o">.</span><span class="n">roll50</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>     <span class="c1"># Roll angle (deg)</span>
<span class="n">pms</span><span class="o">.</span><span class="n">commb</span><span class="o">.</span><span class="n">trk50</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>      <span class="c1"># True track angle (deg)</span>
<span class="n">pms</span><span class="o">.</span><span class="n">commb</span><span class="o">.</span><span class="n">gs50</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>       <span class="c1"># Ground speed (kt)</span>
<span class="n">pms</span><span class="o">.</span><span class="n">commb</span><span class="o">.</span><span class="n">rtrk50</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>     <span class="c1"># Track angle rate (deg/sec)</span>
<span class="n">pms</span><span class="o">.</span><span class="n">commb</span><span class="o">.</span><span class="n">tas50</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>      <span class="c1"># True airspeed (kt)</span>

<span class="c1"># BDS 6,0</span>
<span class="n">pms</span><span class="o">.</span><span class="n">commb</span><span class="o">.</span><span class="n">hdg60</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>      <span class="c1"># Magnetic heading (deg)</span>
<span class="n">pms</span><span class="o">.</span><span class="n">commb</span><span class="o">.</span><span class="n">ias60</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>      <span class="c1"># Indicated airspeed (kt)</span>
<span class="n">pms</span><span class="o">.</span><span class="n">commb</span><span class="o">.</span><span class="n">mach60</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>     <span class="c1"># Mach number (-)</span>
<span class="n">pms</span><span class="o">.</span><span class="n">commb</span><span class="o">.</span><span class="n">vr60baro</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>   <span class="c1"># Barometric altitude rate (ft/min)</span>
<span class="n">pms</span><span class="o">.</span><span class="n">commb</span><span class="o">.</span><span class="n">vr60ins</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>    <span class="c1"># Inertial vertical speed (ft/min)</span>
</pre></div>
</div>
</div>
<div class="section" id="meteorological-routine-air-report-mrar-experimental">
<h3>Meteorological routine air report (MRAR) [Experimental]<a class="headerlink" href="#meteorological-routine-air-report-mrar-experimental" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># BDS 4,4</span>
<span class="n">pms</span><span class="o">.</span><span class="n">commb</span><span class="o">.</span><span class="n">wind44</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>     <span class="c1"># Wind speed (kt) and direction (true) (deg)</span>
<span class="n">pms</span><span class="o">.</span><span class="n">commb</span><span class="o">.</span><span class="n">temp44</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>     <span class="c1"># Static air temperature (C)</span>
<span class="n">pms</span><span class="o">.</span><span class="n">commb</span><span class="o">.</span><span class="n">p44</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>        <span class="c1"># Average static pressure (hPa)</span>
<span class="n">pms</span><span class="o">.</span><span class="n">commb</span><span class="o">.</span><span class="n">hum44</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>      <span class="c1"># Humidity (%)</span>
</pre></div>
</div>
</div>
<div class="section" id="meteorological-hazard-air-report-mhr-experimental">
<h3>Meteorological hazard air report (MHR) [Experimental]<a class="headerlink" href="#meteorological-hazard-air-report-mhr-experimental" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># BDS 4,5</span>
<span class="n">pms</span><span class="o">.</span><span class="n">commb</span><span class="o">.</span><span class="n">turb45</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>     <span class="c1"># Turbulence level (0-3)</span>
<span class="n">pms</span><span class="o">.</span><span class="n">commb</span><span class="o">.</span><span class="n">ws45</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>       <span class="c1"># Wind shear level (0-3)</span>
<span class="n">pms</span><span class="o">.</span><span class="n">commb</span><span class="o">.</span><span class="n">mb45</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>       <span class="c1"># Microburst level (0-3)</span>
<span class="n">pms</span><span class="o">.</span><span class="n">commb</span><span class="o">.</span><span class="n">ic45</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>       <span class="c1"># Icing level (0-3)</span>
<span class="n">pms</span><span class="o">.</span><span class="n">commb</span><span class="o">.</span><span class="n">wv45</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>       <span class="c1"># Wake vortex level (0-3)</span>
<span class="n">pms</span><span class="o">.</span><span class="n">commb</span><span class="o">.</span><span class="n">temp45</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>     <span class="c1"># Static air temperature (C)</span>
<span class="n">pms</span><span class="o">.</span><span class="n">commb</span><span class="o">.</span><span class="n">p45</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>        <span class="c1"># Average static pressure (hPa)</span>
<span class="n">pms</span><span class="o">.</span><span class="n">commb</span><span class="o">.</span><span class="n">rh45</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>       <span class="c1"># Radio height (ft)</span>
</pre></div>
</div>
</div>
<div class="section" id="customize-the-streaming-module">
<h3>Customize the streaming module<a class="headerlink" href="#customize-the-streaming-module" title="Permalink to this headline">¶</a></h3>
<p>The TCP client module from pyModeS can be re-used to stream and process Mode-S data as you like. You need to re-implement the <code class="docutils literal notranslate"><span class="pre">handle_messages()</span></code> function from the <code class="docutils literal notranslate"><span class="pre">TcpClient</span></code> class to write your own logic to handle the messages.</p>
<p>Here is an example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pyModeS</span> <span class="k">as</span> <span class="nn">pms</span>
<span class="kn">from</span> <span class="nn">pyModeS.extra.tcpclient</span> <span class="kn">import</span> <span class="n">TcpClient</span>

<span class="c1"># define your custom class by extending the TcpClient</span>
<span class="c1">#   - implement your handle_messages() methods</span>
<span class="k">class</span> <span class="nc">ADSBClient</span><span class="p">(</span><span class="n">TcpClient</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">host</span><span class="p">,</span> <span class="n">port</span><span class="p">,</span> <span class="n">rawtype</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">ADSBClient</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">host</span><span class="p">,</span> <span class="n">port</span><span class="p">,</span> <span class="n">rawtype</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">handle_messages</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">messages</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">msg</span><span class="p">,</span> <span class="n">ts</span> <span class="ow">in</span> <span class="n">messages</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">28</span><span class="p">:</span>  <span class="c1"># wrong data length</span>
                <span class="k">continue</span>

            <span class="n">df</span> <span class="o">=</span> <span class="n">pms</span><span class="o">.</span><span class="n">df</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">df</span> <span class="o">!=</span> <span class="mi">17</span><span class="p">:</span>  <span class="c1"># not ADSB</span>
                <span class="k">continue</span>

            <span class="k">if</span> <span class="n">pms</span><span class="o">.</span><span class="n">crc</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span> <span class="o">!=</span><span class="mi">0</span><span class="p">:</span>  <span class="c1"># CRC fail</span>
                <span class="k">continue</span>

            <span class="n">icao</span> <span class="o">=</span> <span class="n">pms</span><span class="o">.</span><span class="n">adsb</span><span class="o">.</span><span class="n">icao</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
            <span class="n">tc</span> <span class="o">=</span> <span class="n">pms</span><span class="o">.</span><span class="n">adsb</span><span class="o">.</span><span class="n">typecode</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

            <span class="c1"># TODO: write you magic code here</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">ts</span><span class="p">,</span> <span class="n">icao</span><span class="p">,</span> <span class="n">tc</span><span class="p">,</span> <span class="n">msg</span><span class="p">)</span>

<span class="c1"># run new client, change the host, port, and rawtype if needed</span>
<span class="n">client</span> <span class="o">=</span> <span class="n">ADSBClient</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">30005</span><span class="p">,</span> <span class="n">rawtype</span><span class="o">=</span><span class="s1">&#39;beast&#39;</span><span class="p">)</span>
<span class="n">client</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="unit-test">
<h2>Unit test<a class="headerlink" href="#unit-test" title="Permalink to this headline">¶</a></h2>
<p>To perform unit tests, <code class="docutils literal notranslate"><span class="pre">pytest</span></code> must be install first.</p>
<p>Build Cython extensions</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ make ext
</pre></div>
</div>
<p>Run unit tests</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ make test
</pre></div>
</div>
<p>Clean build files</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ make clean
</pre></div>
</div>
<hr class="docutils" />
<div class="section" id="indices-and-tables">
<h3>Indices and tables<a class="headerlink" href="#indices-and-tables" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="genindex.html"><span class="std std-ref">Index</span></a></p></li>
<li><p><a class="reference internal" href="py-modindex.html"><span class="std std-ref">Module Index</span></a></p></li>
<li><p><a class="reference internal" href="search.html"><span class="std std-ref">Search Page</span></a></p></li>
</ul>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="pyModeS.decoder.adsb.html" class="btn btn-neutral float-right" title="pyModeS.decoder.adsb module" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Junzi Sun.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> and ❤️  using a custom <a href="https://github.com/LinxiFan/Sphinx-theme">theme</a> based on <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="_static/language_data.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>